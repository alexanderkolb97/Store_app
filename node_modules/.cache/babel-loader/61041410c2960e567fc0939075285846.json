{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u0421\\u0430\\u0448\\u0430\\\\Desktop\\\\ladies_react\\\\ladies\\\\src\\\\Cart.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport { Context } from './App';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Cart() {\n  _s();\n\n  const {\n    setCartNumber,\n    itemsIds,\n    setItemsIds,\n    cartNumber\n  } = useContext(Context);\n  let items = JSON.parse(localStorage.getItem('data'));\n\n  const count = id => {\n    let count = 0;\n    itemsIds.forEach(item => {\n      if (+item == +id) count++;\n    });\n    return count;\n  };\n\n  console.log(itemsIds);\n\n  const itemUp = e => {\n    let id = e.target.closest('li').id;\n    let items = itemsIds;\n    items.push(id);\n    document.cookie = `data=${itemsIds.join()}`;\n    setItemsIds();\n    console.log(itemsIds);\n  };\n\n  const itemDown = e => {};\n\n  const removeItem = function (e) {\n    let items = itemsIds;\n    console.log(items);\n    let id = e.target.closest('li').id;\n    console.log(id);\n    let index = items.indexOf(id);\n    console.log(index);\n    if (index != -1) items.splice(index, 1);\n    setItemsIds(items);\n    setCartNumber(items.length);\n    setList(listHtml());\n  }; // 1) научиться считать кол-во товаров по каждому продукту (\"quantity_field\" вызов функции)\n  // 2) удалить дубликаты в cartItems в зависимости от пункта 1 (решается через другого массива с уникальными товарами)\n\n\n  const listHtml = function () {\n    let cartItems = [];\n    cartItems = items.filter(item => {\n      return itemsIds.indexOf(String(item.id)) != -1 ? item : false;\n    });\n    let html = cartItems.map((item, index) => {\n      let quantity = count(item.id) || 0;\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        id: item.id,\n        className: \"item\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: item.image,\n          className: \"cart_img\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"list_item_info\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"info_title\",\n            children: item.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"info_category\",\n            children: item.category\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"info_price\",\n            children: [\"$\", item.price]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"quantity\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"quantity_field\",\n            children: quantity\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: itemUp,\n            className: \"plus\",\n            children: \"+\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: itemDown,\n            className: \"minus\",\n            children: \"-\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: removeItem,\n          className: \"item_remove\",\n          children: \"Remove from cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 25\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this);\n    });\n    return html;\n  };\n\n  const [cartState, setCartState] = useState(false);\n  const [list, setList] = useState(() => listHtml());\n  useEffect(() => {\n    if (list.length > 0) {\n      setCartState(true);\n    } else {\n      setCartState(false);\n    }\n\n    if (itemsIds.length > 0) {\n      document.cookie = `data=${itemsIds.join()}`;\n    } else {\n      document.cookie = 'data=';\n    }\n\n    console.log(itemsIds);\n  }, [list, itemsIds]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cart\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"cart_header\",\n      children: [\"Cart \", cartState ? 'products are displayed below' : 'is empty']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"items_list\",\n      children: list\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Cart, \"QspQ74upo4CKInfDMMfIgL2wfM8=\");\n\n_c = Cart;\nexport default Cart;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"sources":["C:/Users/Саша/Desktop/ladies_react/ladies/src/Cart.js"],"names":["React","useState","useEffect","useContext","Context","Cart","setCartNumber","itemsIds","setItemsIds","cartNumber","items","JSON","parse","localStorage","getItem","count","id","forEach","item","console","log","itemUp","e","target","closest","push","document","cookie","join","itemDown","removeItem","index","indexOf","splice","length","setList","listHtml","cartItems","filter","String","html","map","quantity","image","title","category","price","cartState","setCartState","list"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useContext} from 'react';\r\nimport {Context} from './App';\r\n\r\nfunction Cart() {\r\n    const {setCartNumber, itemsIds, setItemsIds, cartNumber} = useContext(Context);\r\n\r\n    let items = JSON.parse(localStorage.getItem('data'));\r\n\r\n    const count = (id) => {\r\n        let count = 0;\r\n\r\n        itemsIds.forEach(item => {\r\n            if(+item == +id) count++\r\n        })\r\n\r\n        return count\r\n    }\r\n\r\n    console.log(itemsIds)\r\n\r\n    const itemUp = (e) => {   \r\n       let id = e.target.closest('li').id;\r\n       let items = itemsIds;\r\n       items.push(id);\r\n       document.cookie = `data=${itemsIds.join()}`;\r\n       setItemsIds();\r\n       console.log(itemsIds)\r\n    }\r\n\r\n    const itemDown = (e) => {\r\n        \r\n    }\r\n\r\n    const removeItem = function(e) {\r\n        let items = itemsIds;\r\n        console.log(items)\r\n        let id = e.target.closest('li').id;\r\n        console.log(id)\r\n        let index = items.indexOf(id);\r\n        console.log(index)\r\n        if(index != -1) items.splice(index, 1);\r\n        setItemsIds(items);\r\n        setCartNumber(items.length)\r\n        setList(listHtml())\r\n    }\r\n\r\n    // 1) научиться считать кол-во товаров по каждому продукту (\"quantity_field\" вызов функции)\r\n    // 2) удалить дубликаты в cartItems в зависимости от пункта 1 (решается через другого массива с уникальными товарами)\r\n\r\n    const listHtml = function() {\r\n        let cartItems = [];\r\n\r\n        cartItems = items.filter((item) => {\r\n            return itemsIds.indexOf(String(item.id)) != -1 ? item : false\r\n        })\r\n\r\n        let html = cartItems.map((item, index) => {\r\n            let quantity = count(item.id) || 0;\r\n\r\n            return (\r\n                <li id={item.id} key={index} className=\"item\">\r\n                    <img src={item.image} className=\"cart_img\"></img>\r\n                        <div className=\"list_item_info\">\r\n                            <p className=\"info_title\">{item.title}</p>\r\n                            <p className=\"info_category\">{item.category}</p>\r\n                            <p className=\"info_price\">${item.price}</p>\r\n                        </div>\r\n                        <div className=\"quantity\">\r\n                            <div className=\"quantity_field\">{quantity}</div>\r\n                            <button onClick={itemUp} className=\"plus\">+</button>\r\n                            <button onClick={itemDown} className=\"minus\">-</button>\r\n                        </div>\r\n                        <button onClick={removeItem} className=\"item_remove\">Remove from cart</button>\r\n                </li>\r\n            )\r\n        })\r\n\r\n        return html\r\n    }\r\n\r\n    const [cartState, setCartState] = useState(false);\r\n    const [list, setList] = useState(() => listHtml());\r\n\r\n    useEffect(() => {\r\n        if(list.length > 0) {\r\n            setCartState(true)\r\n        } else {\r\n            setCartState(false)\r\n        }\r\n\r\n        if(itemsIds.length > 0) {\r\n            document.cookie = `data=${itemsIds.join()}`;\r\n        } else {\r\n            document.cookie = 'data=';\r\n        }\r\n\r\n        console.log(itemsIds)\r\n\r\n    }, [list, itemsIds])\r\n    \r\n    return (\r\n        <div className=\"cart\">\r\n            <h1 className=\"cart_header\">Cart {cartState ? 'products are displayed below' : 'is empty'}</h1>\r\n            <ul className=\"items_list\">\r\n                {list}\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Cart;\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}